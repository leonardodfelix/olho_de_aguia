<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Olho de Águia — ODS 3: Saúde e Bem-Estar</title>
  <meta name="description"
    content="Trabalho do 6º ano B sobre ODS 3 com simulador de visão: miopia, astigmatismo, daltonismo e catarata." />
  <style>
    :root {
      --bg: #0d1016;
      --card: #161a22;
      --text: #e8edf2;
      --muted: #a6b0bf;
      --border: #222838;
      --success: #46d27c;
      --brand-1: #f2d074;
      --brand-2: #d9b24c;
      --brand-3: #b9912f;
      --focus: #3b77ff;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(1200px 800px at 20% 0%, #121622, #0b0e15) fixed,
        var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
        sans-serif;
      line-height: 1.5;
    }

    a {
      color: inherit;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px 16px 64px;
    }

    /* ============== Header/Brand ============== */

    header.site-header {
      padding: 18px 0 12px;
    }

    .brand {
      display: grid;
      gap: 8px;
      justify-items: start;
    }

    .logo {
      display: inline-grid;
      gap: 6px;
    }

    .logo-svg {
      width: clamp(200px, 36vw, 340px);
      height: auto;
      display: block;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: #0f1423;
      color: var(--text);
      font-weight: 600;
      font-size: 0.86rem;
    }

    .badge .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--success);
    }

    .subtitle {
      color: var(--muted);
      margin-top: 8px;
      font-size: 0.98rem;
    }

    /* ============== Layout Principal ============== */

    .layout {
      display: grid;
      gap: 16px;
    }

    @media (min-width: 900px) {
      .layout {
        grid-template-columns: 380px 1fr;
        align-items: start;
      }
    }

    .card {
      background: linear-gradient(180deg, #141926, #121625);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.22),
        inset 0 1px 0 rgba(255, 255, 255, 0.03);
    }

    .stack {
      display: grid;
      gap: 12px;
    }

    label {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .row {
      display: grid;
      gap: 8px;
    }

    .row-inline {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
    }

    .control-2 {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
    }

    select,
    input[type="range"],
    input[type="file"],
    button {
      width: 100%;
      background: #0e1320;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease, transform 0.05s;
    }

    select:focus,
    input[type="range"]:focus,
    input[type="file"]:focus,
    button:focus {
      border-color: var(--focus);
      box-shadow: 0 0 0 3px rgba(59, 119, 255, 0.15);
    }

    input[type="range"] {
      -webkit-appearance: none;
      height: 36px;
      padding: 0 10px;
    }

    input[type="range"]::-webkit-slider-runnable-track {
      height: 6px;
      background: linear-gradient(90deg, #1b2132, #1a2130);
      border-radius: 8px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 22px;
      height: 22px;
      margin-top: -8px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #9bd2ff, #59b5ff);
      border: 1px solid #2a5e9c;
      box-shadow: 0 3px 10px rgba(89, 181, 255, 0.25);
    }

    input[type="range"]::-moz-range-track {
      height: 6px;
      background: linear-gradient(90deg, #1b2132, #1a2130);
      border-radius: 8px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 22px;
      height: 22px;
      border: none;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #9bd2ff, #59b5ff);
      box-shadow: 0 3px 10px rgba(89, 181, 255, 0.25);
    }

    .hint {
      color: var(--muted);
      font-size: 0.85rem;
    }

    /* ============== Viewer ============== */

    .viewer {
      display: grid;
      gap: 10px;
    }

    .stage {
      position: relative;
      background: #0b0f19;
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      aspect-ratio: 16 / 10;
      min-height: 220px;
    }

    .stage .img-wrap,
    .stage canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .img-wrap {
      display: grid;
      place-items: center;
    }

    .img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: none;
      transition: filter 0.12s linear;
    }

    .toolbar {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
    }

    @media (min-width: 520px) {
      .toolbar {
        grid-template-columns: 1fr 1fr;
      }
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 12px;
      background: #101527;
      border: 1px solid var(--border);
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }

    .btn.secondary {
      background: #0f1423;
    }

    .footer-note {
      margin-top: 4px;
      color: var(--muted);
      font-size: 0.85rem;
      text-align: center;
    }

    /* ============== Conteúdo educativo ============== */

    .edu h2 {
      margin: 0 0 8px 0;
      font-size: 1.2rem;
    }

    .edu p,
    .edu li {
      color: #d7dfeb;
    }

    .ods-pill {
      background: #0f1a12;
      border-color: #1f3b29;
    }

    .ods-pill .dot {
      background: var(--success);
    }

    .group-card ul {
      margin: 0;
      padding-left: 18px;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="site-header">
      <div class="brand" aria-label="Olho de Águia">
        <div class="logo">
          <!-- Logo nova: olhos + nome original -->
          <svg class="logo-svg" viewBox="0 0 640 200" xmlns="http://www.w3.org/2000/svg" role="img"
            aria-labelledby="logoTitle">
            <title id="logoTitle">Olho de Águia</title>
            <defs>
              <linearGradient id="gold" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="var(--brand-1)" />
                <stop offset="55%" stop-color="var(--brand-2)" />
                <stop offset="100%" stop-color="var(--brand-3)" />
              </linearGradient>
            </defs>

            <!-- Olhos estilizados -->
            <g fill="#0b0b0b" stroke="#0b0b0b" stroke-width="2">
              <!-- Esquerdo -->
              <path d="M170 55c28-24 66-22 92 2-15 0-27 6-35 14 16-3 30 1 40 8-28 2-50 16-81 5-10-4-16-10-16-29Z" />
              <!-- Direito (espelho) -->
              <g transform="translate(470,67) scale(-1,1) translate(-170,-12)">
                <path d="M170 55c28-24 66-22 92 2-15 0-27 6-35 14 16-3 30 1 40 8-28 2-50 16-81 5-10-4-16-10-16-29Z" />
              </g>
            </g>

            <!-- Título “Olho de Águia” -->
            <g font-family="Georgia, 'Times New Roman', serif" text-anchor="middle" fill="url(#gold)">
              <text x="320" y="120" font-size="44" font-weight="800">
                OLHO DE ÁGUIA
              </text>
            </g>
          </svg>

          <span class="badge ods-pill" title="ODS 3: Saúde e Bem-Estar">
            <span class="dot"></span>
            ODS 3: Saúde e Bem-Estar
          </span>
        </div>

        <div class="subtitle">
          Trabalho do 6º ano B: entendendo a visão e a importância do cuidado
          com os olhos.
        </div>
      </div>
    </header>

    <!-- Layout principal: coluna de controles + coluna livre (texto/explicações) -->
    <main class="layout">
      <!-- Coluna esquerda -->
      <section class="card stack" aria-label="Controles do simulador">
        <div class="row">
          <label for="disease">Condição</label>
          <div class="control-2">
            <select id="disease" aria-label="Selecione a condição">
              <option value="miopia" selected>Miopia</option>
              <option value="astigmatismo">Astigmatismo</option>
              <option value="daltonismo">Daltonismo</option>
              <option value="catarata">Catarata</option>
            </select>
            <button id="resetBtn" class="btn secondary" type="button">
              Resetar
            </button>
          </div>
        </div>

        <div class="row" id="intensityRow">
          <label for="intensityLabel" id="intensityTitle">Intensidade</label>
          <div class="row-inline">
            <input id="intensity" type="range" min="0" max="100" value="40" step="1" aria-labelledby="intensityTitle" />
            <span class="hint" id="intensityLabel">40%</span>
          </div>
          <div class="hint" id="intensityHelp">
            Ajuste conforme a condição selecionada.
          </div>
        </div>

        <div class="row" id="typeRow" style="display: none">
          <label for="typeSelect" id="typeLabel">Tipo</label>
          <select id="typeSelect" aria-labelledby="typeLabel">
            <option value="protanopia">Protanopia</option>
            <option value="deuteranopia" selected>Deuteranopia</option>
            <option value="tritanopia">Tritanopia</option>
          </select>
          <div class="hint">Selecione o tipo de daltonismo.</div>
        </div>

        <div class="row">
          <label for="upload">Imagem</label>
          <input id="upload" type="file" accept="image/*" aria-label="Enviar imagem" />
          <div class="hint">
            Envie uma imagem para ver os efeitos. Por padrão, usamos uma
            imagem demonstrativa.
          </div>
        </div>

        <!-- Viewer -->
        <div class="viewer" aria-label="Simulador">
          <div class="stage" id="stage">
            <div class="img-wrap">
              <img id="baseImg" alt="Imagem demonstrativa para simulação visual"
                src="https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop"
                crossorigin="anonymous" />
            </div>
            <canvas id="canvas"></canvas>
          </div>

          <div class="toolbar">
            <button id="downloadBtn" class="btn" type="button">
              Baixar resultado
            </button>
            <button id="toggleViewBtn" class="btn secondary" type="button">
              Alternar original/processada
            </button>
          </div>

          <p class="footer-note">
            Nota: Simulação educativa aproximada; não substitui avaliação
            profissional.
          </p>
        </div>
      </section>

      <!-- Coluna direita: conteúdo educativo -->
      <section class="stack" aria-label="Conteúdo educativo">
        <div class="card edu">
          <h2>ODS 3: Saúde e Bem-Estar</h2>
          <p>
            A ODS 3 busca garantir vidas saudáveis e promover o bem-estar para
            todos. Cuidar da visão faz parte desse objetivo, pois enxergar bem
            ajuda no aprendizado, segurança e qualidade de vida.
          </p>
          <ul>
            <li>Faça exames de vista regularmente e use óculos quando indicado.</li>
            <li>Proteja os olhos do sol com boné/óculos com proteção UV.</li>
            <li>Mantenha distância de telas e aplique a regra 20-20-20.</li>
            <li>Tenha alimentação equilibrada (vitaminas A, C, E ajudam).</li>
            <li>Procure orientação médica ao notar dificuldade visual.</li>
          </ul>
        </div>

        <div class="card group-card">
          <h2>6º ano B — Integrantes</h2>
          <ul>
            <li>Analu</li>
            <li>Bento</li>
            <li>Clarice</li>
            <li>Davi Emenes</li>
            <li>Davi Walter</li>
            <li>Gabriela</li>
            <li>Helena Felix</li>
            <li>João Pedro</li>
          </ul>
        </div>
      </section>
    </main>
  </div>

  <script>
    const $ = (s) => document.querySelector(s);

    const diseaseEl = $("#disease");
    const intensityEl = $("#intensity");
    const intensityLabel = $("#intensityLabel");
    const intensityTitle = $("#intensityTitle");
    const intensityHelp = $("#intensityHelp");
    const typeRow = $("#typeRow");
    const typeSelect = $("#typeSelect");
    const uploadEl = $("#upload");
    const baseImg = $("#baseImg");
    const canvas = $("#canvas");
    const stage = $("#stage");
    const resetBtn = $("#resetBtn");
    const toggleViewBtn = $("#toggleViewBtn");
    const downloadBtn = $("#downloadBtn");

    const ctx = canvas.getContext("2d");

    const state = {
      disease: "miopia",
      intensity: 40,
      colorType: "deuteranopia",
      showProcessed: true,
      image: null,
    };

    function clamp(v, min, max) {
      return Math.max(min, Math.min(max, v));
    }

    function resizeCanvasToStage() {
      const rect = stage.getBoundingClientRect();
      // Keep device pixel ratio reasonable for mobile
      const dpr = Math.min(window.devicePixelRatio || 1, 2);

      // Set actual canvas dimensions
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);

      // Set display size (CSS pixels)
      canvas.style.width = rect.width + "px";
      canvas.style.height = rect.height + "px";

      // Scale context to match device pixel ratio
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    function loadImageFromFile(file) {
      return new Promise(function (resolve, reject) {
        const url = URL.createObjectURL(file);
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = function () {
          URL.revokeObjectURL(url);
          resolve(img);
        };
        img.onerror = reject;
        img.src = url;
      });
    }

    function imageToCanvas(img) {
      const rect = stage.getBoundingClientRect();
      const w = rect.width;
      const h = rect.height;

      // Calculate scaling to fill the container while maintaining aspect ratio
      const imgAspect = img.naturalWidth / img.naturalHeight;
      const containerAspect = w / h;

      let drawWidth, drawHeight, drawX, drawY;

      if (imgAspect > containerAspect) {
        // Image is wider - fit to height
        drawHeight = h;
        drawWidth = h * imgAspect;
        drawX = (w - drawWidth) / 2;
        drawY = 0;
      } else {
        // Image is taller - fit to width
        drawWidth = w;
        drawHeight = w / imgAspect;
        drawX = 0;
        drawY = (h - drawHeight) / 2;
      }

      ctx.clearRect(0, 0, w, h);
      ctx.drawImage(img, drawX, drawY, drawWidth, drawHeight);
    }

    const colorBlindMatrices = {
      protanopia: [
        0.56667, 0.43333, 0.0, 0.55833, 0.44167, 0.0, 0.0, 0.24167, 0.75833,
      ],
      deuteranopia: [0.625, 0.375, 0.0, 0.7, 0.3, 0.0, 0.0, 0.3, 0.7],
      tritanopia: [0.95, 0.05, 0.0, 0.0, 0.43333, 0.56667, 0.0, 0.475, 0.525],
    };

    function applyColorMatrix(imgData, mat, strength) {
      const d = imgData.data;
      const m00 = mat[0], m01 = mat[1], m02 = mat[2];
      const m10 = mat[3], m11 = mat[4], m12 = mat[5];
      const m20 = mat[6], m21 = mat[7], m22 = mat[8];

      for (let i = 0; i < d.length; i += 4) {
        const r = d[i];
        const g = d[i + 1];
        const b = d[i + 2];
        const tr = m00 * r + m01 * g + m02 * b;
        const tg = m10 * r + m11 * g + m12 * b;
        const tb = m20 * r + m21 * g + m22 * b;
        d[i] = r + (tr - r) * strength;
        d[i + 1] = g + (tg - g) * strength;
        d[i + 2] = b + (tb - b) * strength;
      }
      return imgData;
    }

    // Simplified blur that works consistently across devices
    function simpleBoxBlur(imgData, radius) {
      if (radius < 1) return imgData;

      const pixels = imgData.data;
      const width = imgData.width;
      const height = imgData.height;
      const output = new Uint8ClampedArray(pixels.length);

      // Copy original data first
      for (let i = 0; i < pixels.length; i++) {
        output[i] = pixels[i];
      }

      const kernelSize = Math.min(radius * 2 + 1, 15); // Limit kernel size for performance
      const half = Math.floor(kernelSize / 2);

      for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
          let r = 0, g = 0, b = 0, a = 0, count = 0;

          for (let ky = -half; ky <= half; ky++) {
            for (let kx = -half; kx <= half; kx++) {
              const px = x + kx;
              const py = y + ky;

              if (px >= 0 && px < width && py >= 0 && py < height) {
                const idx = (py * width + px) * 4;
                r += pixels[idx];
                g += pixels[idx + 1];
                b += pixels[idx + 2];
                a += pixels[idx + 3];
                count++;
              }
            }
          }

          const idx = (y * width + x) * 4;
          output[idx] = r / count;
          output[idx + 1] = g / count;
          output[idx + 2] = b / count;
          output[idx + 3] = a / count;
        }
      }

      return new ImageData(output, width, height);
    }

    function directionalBlurPass(imgData, dirX, dirY, radius) {
      const width = imgData.width;
      const height = imgData.height;
      const data = imgData.data;
      const out = new Uint8ClampedArray(data.length);

      for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
          let r = 0, g = 0, b = 0, a = 0, wsum = 0;

          for (let t = -radius; t <= radius; t++) {
            const sx = Math.round(x + dirX * t);
            const sy = Math.round(y + dirY * t);
            if (sx < 0 || sy < 0 || sx >= width || sy >= height) continue;
            const idx = (sy * width + sx) * 4;
            r += data[idx];
            g += data[idx + 1];
            b += data[idx + 2];
            a += data[idx + 3];
            wsum++;
          }
          const o = (y * width + x) * 4;
          out[o] = r / wsum;
          out[o + 1] = g / wsum;
          out[o + 2] = b / wsum;
          out[o + 3] = a / wsum;
        }
      }
      return new ImageData(out, width, height);
    }

    function astigmatismEffect(baseData, strength) {
      const maxRadius = 8; // Reduced for mobile performance
      const r1 = Math.max(1, Math.round(maxRadius * strength));
      const r2 = Math.max(0, Math.round((maxRadius * strength) / 3));
      let pass1 = directionalBlurPass(baseData, 1, 0, r1);
      if (r2 > 0) pass1 = directionalBlurPass(pass1, 0, 1, r2);
      return pass1;
    }

    function cataractEffect(imgData, strength) {
      const d = imgData.data;
      const haze = 0.1 + strength * 0.35;
      const contrast = 1 - strength * 0.4;
      const mid = 128;

      // First apply some blur for cataract effect
      const blurred = simpleBoxBlur(imgData, Math.round(strength * 4));
      const blurredData = blurred.data;

      for (let i = 0; i < d.length; i += 4) {
        // Mix original and blurred
        const mixFactor = strength * 0.6;
        d[i] = d[i] * (1 - mixFactor) + blurredData[i] * mixFactor;
        d[i + 1] = d[i + 1] * (1 - mixFactor) + blurredData[i + 1] * mixFactor;
        d[i + 2] = d[i + 2] * (1 - mixFactor) + blurredData[i + 2] * mixFactor;

        // Apply haze and contrast
        d[i] = (d[i] + (255 - d[i]) * haze - mid) * contrast + mid;
        d[i + 1] = (d[i + 1] + (255 - d[i + 1]) * haze - mid) * contrast + mid;
        d[i + 2] = (d[i + 2] + (255 - d[i + 2]) * haze - mid) * contrast + mid;
      }
      return imgData;
    }

    function render() {
      resizeCanvasToStage();
      const img = state.image || baseImg;
      const strength = clamp(state.intensity / 100, 0, 1);

      // Draw the base image first
      imageToCanvas(img);

      // Apply effects if needed
      if (strength > 0) {
        const rect = stage.getBoundingClientRect();
        const imgData = ctx.getImageData(0, 0, rect.width, rect.height);
        let processedData = imgData;

        if (state.disease === "miopia") {
          const blurRadius = Math.round(strength * 6); // Reduced blur intensity
          processedData = simpleBoxBlur(imgData, blurRadius);
        } else if (state.disease === "astigmatismo") {
          processedData = astigmatismEffect(imgData, strength);
        } else if (state.disease === "daltonismo") {
          processedData = applyColorMatrix(
            imgData,
            colorBlindMatrices[state.colorType],
            strength
          );
        } else if (state.disease === "catarata") {
          processedData = cataractEffect(imgData, strength);
        }

        if (processedData !== imgData) {
          ctx.putImageData(processedData, 0, 0);
        }
      }

      canvas.style.opacity = state.showProcessed ? "1" : "0";
      updateIntensityReadout();
    }

    function updateIntensityReadout() {
      const val = state.intensity;
      if (state.disease === "miopia") {
        const diopters = -(Math.round((val / 100) * 50) / 10);
        intensityLabel.textContent = diopters === 0 ? "0.00 D" : diopters.toFixed(2) + " D";
        intensityTitle.textContent = "Miopia (dioptrias aprox.)";
        intensityHelp.textContent = "Simula o desfoque de longe; valores em dioptrias são ilustrativos.";
      } else if (state.disease === "astigmatismo") {
        const maxR = 8;
        const rH = Math.max(1, Math.round((val / 100) * maxR));
        const rV = Math.max(0, Math.round(((val / 100) * maxR) / 3));
        intensityLabel.textContent = "raio H≈" + rH + " px / V≈" + rV + " px";
        intensityTitle.textContent = "Astigmatismo (desfoque direcional)";
        intensityHelp.textContent = "Nítido em uma direção e desfocado em outra (valores aproximados).";
      } else if (state.disease === "daltonismo") {
        intensityLabel.textContent = "força " + val + "/100";
        intensityTitle.textContent = "Daltonismo (força da simulação)";
        intensityHelp.textContent = "Mistura entre a imagem original e a transformada.";
      } else if (state.disease === "catarata") {
        let stageLabel = "leve";
        if (val >= 70) stageLabel = "avançado";
        else if (val >= 40) stageLabel = "moderado";
        intensityLabel.textContent = stageLabel + " (" + val + "/100)";
        intensityTitle.textContent = "Catarata (estágio aproximado)";
        intensityHelp.textContent = "Véu esbranquiçado, menos contraste e leve desfoque.";
      }
    }

    function updateUIForDisease() {
      const d = state.disease;
      typeRow.style.display = d === "daltonismo" ? "" : "none";
      updateIntensityReadout();
    }

    // Event listeners
    diseaseEl.addEventListener("change", function (e) {
      state.disease = e.target.value;
      updateUIForDisease();
      render();
    });

    intensityEl.addEventListener("input", function (e) {
      state.intensity = parseInt(e.target.value, 10);
      render();
    });

    typeSelect.addEventListener("change", function (e) {
      state.colorType = e.target.value;
      render();
    });

    uploadEl.addEventListener("change", function (e) {
      const files = e.target.files;
      const file = files && files[0];
      if (!file) return;

      loadImageFromFile(file).then(function (img) {
        state.image = img;
        render();
      }).catch(function (err) {
        alert("Falha ao carregar a imagem. Tente outro arquivo.");
        console.error(err);
      });
    });

    resetBtn.addEventListener("click", function () {
      state.disease = "miopia";
      diseaseEl.value = state.disease;
      state.intensity = 40;
      intensityEl.value = "40";
      state.colorType = "deuteranopia";
      typeSelect.value = "deuteranopia";
      state.showProcessed = true;
      updateUIForDisease();
      render();
    });

    toggleViewBtn.addEventListener("click", function () {
      state.showProcessed = !state.showProcessed;
      render();
    });

    downloadBtn.addEventListener("click", function () {
      const a = document.createElement("a");
      a.download = "olho-de-aguia-" + state.disease + ".png";
      a.href = canvas.toDataURL("image/png");
      a.click();
    });

    window.addEventListener("resize", render);
    baseImg.addEventListener("load", render);

    // Initialize
    updateUIForDisease();
    render();
  </script>
</body>

</html>